<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Readable Full-Screen Fireworks</title>
<style>
  html, body { margin:0; height:100%; background:#000; overflow:hidden; }
  canvas { display:block; background:#000; }
  .controls {
    position:absolute; top:10px; left:10px; padding:10px; background:rgba(0,0,0,0.6);
    color:#fff; font-family:sans-serif; border-radius:8px; width:200px;
    transition: transform 0.3s ease, opacity 0.3s ease;
  }
  .controls.hide {
    transform: translateX(-220px);
    opacity: 0;
  }
  .controls input, .controls button { margin-top:6px; width:100%; padding:6px; border-radius:4px; border:none; }
  .controls label { font-size:14px; display:block; margin-top:8px; }
  #toggleMenu {
    position:absolute; top:10px; left:10px; z-index:10; padding:6px 10px; border:none;
    border-radius:4px; background:rgba(255,255,255,0.8); cursor:pointer; font-weight:bold;
  }
</style>
</head>
<body>
<canvas id="c"></canvas>

<button id="toggleMenu">â˜° Menu</button>

<div class="controls" id="controls">
  <label>Name (letters will explode in shape):</label>
  <input id="name" value="by idcare19">
  <label>Loop?</label>
  <input type="checkbox" id="loop" checked>
  <button id="start">Start Fireworks</button>
  <button id="reset">Reset</button>
</div>

<script>
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
let width = window.innerWidth, height = window.innerHeight;
canvas.width = width;
canvas.height = height;

window.addEventListener('resize', ()=>{
    width = window.innerWidth; height = window.innerHeight;
    canvas.width = width; canvas.height = height;
});

// Auto font size to fill screen
function getFontSize(text){
    let fontSize = 100;
    ctx.font = `bold ${fontSize}px sans-serif`;
    let textWidth = ctx.measureText(text).width;
    fontSize = fontSize * (width * 0.8 / textWidth); // 80% width
    if(fontSize > height*0.8) fontSize = height*0.8;
    return fontSize;
}

let letterParticles = [];
let running = false;
let loop = true;

class Particle {
    constructor(x,y,color,tx,ty){
        this.x = x; this.y = y;
        this.vx = (Math.random()-0.5)*10;
        this.vy = (Math.random()-1.5)*10;
        this.color = color;
        this.life = 0;
        this.maxLife = 100 + Math.random()*50;
        this.tx = tx; this.ty = ty;
        this.settled = false;
    }
    update(){
        this.life++;
        if(this.life < 25){
            this.x += this.vx; this.y += this.vy;
            this.vy += 0.12;
            this.vx *= 0.98; this.vy *= 0.98;
        } else {
            const dx = this.tx - this.x;
            const dy = this.ty - this.y;
            this.x += dx*0.1;
            this.y += dy*0.1;
            this.settled = true;
        }
    }
    draw(ctx){
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x,this.y,2,0,Math.PI*2);
        ctx.fill();
    }
    alive(){ return this.life < this.maxLife || !this.settled; }
}

// Generate letter particles
function generateLetterParticles(name){
    const fontSize = getFontSize(name);
    const tempCanvas = document.createElement('canvas');
    const tctx = tempCanvas.getContext('2d');
    tempCanvas.width = width; tempCanvas.height = height;
    tctx.clearRect(0,0,width,height);
    tctx.font = `bold ${fontSize}px sans-serif`;
    tctx.textAlign = 'center';
    tctx.textBaseline = 'middle';
    tctx.fillStyle = 'white';
    tctx.fillText(name, width/2, height/2);

    const data = tctx.getImageData(0,0,width,height).data;
    const positions = [];
    
    // Dynamic step: smaller for smaller screens to make word complete
    let step = Math.max(3, Math.floor(width/200)); 

    for(let y=0; y<height; y+=step){
        for(let x=0; x<width; x+=step){
            const alpha = data[(y*width + x)*4 + 3];
            if(alpha > 128) positions.push({x,y});
        }
    }
    return positions;
}

function launchLetterFirework(){
    letterParticles = [];
    const name = document.getElementById('name').value || 'YOU';
    const positions = generateLetterParticles(name);
    for(let pos of positions){
        const color = `hsl(${Math.random()*360}, 80%, 60%)`;
        const p = new Particle(width/2, height+10, color, pos.x, pos.y);
        letterParticles.push(p);
    }
}

function animate(){
    ctx.fillStyle = 'rgba(0,0,0,0.2)';
    ctx.fillRect(0,0,width,height);

    for(let i=letterParticles.length-1;i>=0;i--){
        const p = letterParticles[i];
        p.update();
        p.draw(ctx);
        if(!p.alive()) letterParticles.splice(i,1);
    }

    if(running) requestAnimationFrame(animate);
    else drawStaticName();
}

function drawStaticName(){
    const name = document.getElementById('name').value || 'YOU';
    const fontSize = getFontSize(name);
    ctx.font = `bold ${fontSize}px sans-serif`;
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    ctx.fillStyle = 'rgba(255,255,255,0.8)';
    ctx.fillText(name, width/2, height/2);
}

// Start
const controls = document.getElementById('controls');
document.getElementById('start').addEventListener('click', ()=>{
    running = true;
    loop = document.getElementById('loop').checked;
    controls.classList.add('hide'); // auto-hide menu
    launchLetterFirework();
    animate();
    if(loop){
        setInterval(()=>{
            if(running && letterParticles.length===0){
                launchLetterFirework();
            }
        }, 4000);
    }
});

// Reset
document.getElementById('reset').addEventListener('click', ()=>{
    running = false;
    letterParticles=[];
    ctx.clearRect(0,0,width,height);
    drawStaticName();
    controls.classList.remove('hide');
});

// Toggle menu
document.getElementById('toggleMenu').addEventListener('click', ()=>{
    controls.classList.toggle('hide');
});

// Initial draw
drawStaticName();
</script>
</body>
</html>
